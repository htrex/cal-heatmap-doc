!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("d3-selection"),require("d3")):"function"==typeof define&&define.amd?define(["d3-selection","d3"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).LegendLite=e(t.d3,t.d3)}(this,(function(t,e){"use strict";function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=function(t){try{return!!t()}catch(t){return!0}},l=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),f=!s((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),p=f,d=Function.prototype,h=d.call,y=p&&d.bind.bind(h,h),v=p?y:function(t){return function(){return h.apply(t,arguments)}},g=function(t){return null==t},m=g,b=TypeError,w=function(t){if(m(t))throw b("Can't call method on "+t);return t},S=w,O=Object,j=function(t){return O(S(t))},T=j,P=v({}.hasOwnProperty),E=Object.hasOwn||function(t,e){return P(T(t),e)},R=l,M=E,x=Function.prototype,k=R&&Object.getOwnPropertyDescriptor,A=M(x,"name"),L={EXISTS:A,PROPER:A&&"something"===function(){}.name,CONFIGURABLE:A&&(!R||R&&k(x,"name").configurable)},C={},I={get exports(){return C},set exports(t){C=t}},N="object"==typeof document&&document.all,B={all:N,IS_HTMLDDA:void 0===N&&void 0!==N},D=B.all,G=B.IS_HTMLDDA?function(t){return"function"==typeof t||t===D}:function(t){return"function"==typeof t},F=function(t){return t&&t.Math==Math&&t},q=F("object"==typeof globalThis&&globalThis)||F("object"==typeof window&&window)||F("object"==typeof self&&self)||F("object"==typeof c&&c)||function(){return this}()||Function("return this")(),_=q,W=Object.defineProperty,$=function(t,e){try{W(_,t,{value:e,configurable:!0,writable:!0})}catch(n){_[t]=e}return e},Y=$,z="__core-js_shared__",U=q[z]||Y(z,{}),H=G,V=U,K=v(Function.toString);H(V.inspectSource)||(V.inspectSource=function(t){return K(t)});var X,J,Q=V.inspectSource,Z=G,tt=q.WeakMap,et=Z(tt)&&/native code/.test(String(tt)),nt=G,rt=B.all,ot=B.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:nt(t)||t===rt}:function(t){return"object"==typeof t?null!==t:nt(t)},it={},at=ot,ut=q.document,ct=at(ut)&&at(ut.createElement),st=function(t){return ct?ut.createElement(t):{}},lt=st,ft=!l&&!s((function(){return 7!=Object.defineProperty(lt("div"),"a",{get:function(){return 7}}).a})),pt=l&&s((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),dt=ot,ht=String,yt=TypeError,vt=function(t){if(dt(t))return t;throw yt(ht(t)+" is not an object")},gt=f,mt=Function.prototype.call,bt=gt?mt.bind(mt):function(){return mt.apply(mt,arguments)},wt=q,St=G,Ot=function(t){return St(t)?t:void 0},jt=function(t,e){return arguments.length<2?Ot(wt[t]):wt[t]&&wt[t][e]},Tt=v({}.isPrototypeOf),Pt="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Et=q,Rt=Pt,Mt=Et.process,xt=Et.Deno,kt=Mt&&Mt.versions||xt&&xt.version,At=kt&&kt.v8;At&&(J=(X=At.split("."))[0]>0&&X[0]<4?1:+(X[0]+X[1])),!J&&Rt&&(!(X=Rt.match(/Edge\/(\d+)/))||X[1]>=74)&&(X=Rt.match(/Chrome\/(\d+)/))&&(J=+X[1]);var Lt=J,Ct=Lt,It=s,Nt=!!Object.getOwnPropertySymbols&&!It((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Ct&&Ct<41})),Bt=Nt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Dt=jt,Gt=G,Ft=Tt,qt=Object,_t=Bt?function(t){return"symbol"==typeof t}:function(t){var e=Dt("Symbol");return Gt(e)&&Ft(e.prototype,qt(t))},Wt=String,$t=function(t){try{return Wt(t)}catch(t){return"Object"}},Yt=G,zt=$t,Ut=TypeError,Ht=function(t){if(Yt(t))return t;throw Ut(zt(t)+" is not a function")},Vt=Ht,Kt=g,Xt=function(t,e){var n=t[e];return Kt(n)?void 0:Vt(n)},Jt=bt,Qt=G,Zt=ot,te=TypeError,ee={},ne=U;({get exports(){return ee},set exports(t){ee=t}}.exports=function(t,e){return ne[t]||(ne[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.28.0",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.28.0/LICENSE",source:"https://github.com/zloirock/core-js"});var re=v,oe=0,ie=Math.random(),ae=re(1..toString),ue=function(t){return"Symbol("+(void 0===t?"":t)+")_"+ae(++oe+ie,36)},ce=ee,se=E,le=ue,fe=Nt,pe=Bt,de=q.Symbol,he=ce("wks"),ye=pe?de.for||de:de&&de.withoutSetter||le,ve=function(t){return se(he,t)||(he[t]=fe&&se(de,t)?de[t]:ye("Symbol."+t)),he[t]},ge=bt,me=ot,be=_t,we=Xt,Se=function(t,e){var n,r;if("string"===e&&Qt(n=t.toString)&&!Zt(r=Jt(n,t)))return r;if(Qt(n=t.valueOf)&&!Zt(r=Jt(n,t)))return r;if("string"!==e&&Qt(n=t.toString)&&!Zt(r=Jt(n,t)))return r;throw te("Can't convert object to primitive value")},Oe=TypeError,je=ve("toPrimitive"),Te=function(t,e){if(!me(t)||be(t))return t;var n,r=we(t,je);if(r){if(void 0===e&&(e="default"),n=ge(r,t,e),!me(n)||be(n))return n;throw Oe("Can't convert object to primitive value")}return void 0===e&&(e="number"),Se(t,e)},Pe=_t,Ee=function(t){var e=Te(t,"string");return Pe(e)?e:e+""},Re=l,Me=ft,xe=pt,ke=vt,Ae=Ee,Le=TypeError,Ce=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,Ne="enumerable",Be="configurable",De="writable";it.f=Re?xe?function(t,e,n){if(ke(t),e=Ae(e),ke(n),"function"==typeof t&&"prototype"===e&&"value"in n&&De in n&&!n[De]){var r=Ie(t,e);r&&r[De]&&(t[e]=n.value,n={configurable:Be in n?n[Be]:r[Be],enumerable:Ne in n?n[Ne]:r[Ne],writable:!1})}return Ce(t,e,n)}:Ce:function(t,e,n){if(ke(t),e=Ae(e),ke(n),Me)try{return Ce(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Le("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Ge,Fe,qe,_e=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},We=it,$e=_e,Ye=l?function(t,e,n){return We.f(t,e,$e(1,n))}:function(t,e,n){return t[e]=n,t},ze=ue,Ue=ee("keys"),He=function(t){return Ue[t]||(Ue[t]=ze(t))},Ve={},Ke=et,Xe=q,Je=ot,Qe=Ye,Ze=E,tn=U,en=He,nn=Ve,rn="Object already initialized",on=Xe.TypeError,an=Xe.WeakMap;if(Ke||tn.state){var un=tn.state||(tn.state=new an);un.get=un.get,un.has=un.has,un.set=un.set,Ge=function(t,e){if(un.has(t))throw on(rn);return e.facade=t,un.set(t,e),e},Fe=function(t){return un.get(t)||{}},qe=function(t){return un.has(t)}}else{var cn=en("state");nn[cn]=!0,Ge=function(t,e){if(Ze(t,cn))throw on(rn);return e.facade=t,Qe(t,cn,e),e},Fe=function(t){return Ze(t,cn)?t[cn]:{}},qe=function(t){return Ze(t,cn)}}var sn={set:Ge,get:Fe,has:qe,enforce:function(t){return qe(t)?Fe(t):Ge(t,{})},getterFor:function(t){return function(e){var n;if(!Je(e)||(n=Fe(e)).type!==t)throw on("Incompatible receiver, "+t+" required");return n}}},ln=v,fn=s,pn=G,dn=E,hn=l,yn=L.CONFIGURABLE,vn=Q,gn=sn.enforce,mn=sn.get,bn=String,wn=Object.defineProperty,Sn=ln("".slice),On=ln("".replace),jn=ln([].join),Tn=hn&&!fn((function(){return 8!==wn((function(){}),"length",{value:8}).length})),Pn=String(String).split("String"),En=I.exports=function(t,e,n){"Symbol("===Sn(bn(e),0,7)&&(e="["+On(bn(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!dn(t,"name")||yn&&t.name!==e)&&(hn?wn(t,"name",{value:e,configurable:!0}):t.name=e),Tn&&n&&dn(n,"arity")&&t.length!==n.arity&&wn(t,"length",{value:n.arity});try{n&&dn(n,"constructor")&&n.constructor?hn&&wn(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=gn(t);return dn(r,"source")||(r.source=jn(Pn,"string"==typeof e?e:"")),t};Function.prototype.toString=En((function(){return pn(this)&&mn(this).source||vn(this)}),"toString");var Rn=C,Mn=it,xn=function(t,e,n){return n.get&&Rn(n.get,e,{getter:!0}),n.set&&Rn(n.set,e,{setter:!0}),Mn.f(t,e,n)},kn=l,An=L.EXISTS,Ln=v,Cn=xn,In=Function.prototype,Nn=Ln(In.toString),Bn=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Dn=Ln(Bn.exec);kn&&!An&&Cn(In,"name",{configurable:!0,get:function(){try{return Dn(Bn,Nn(this))[1]}catch(t){return""}}});var Gn={},Fn={},qn={}.propertyIsEnumerable,_n=Object.getOwnPropertyDescriptor,Wn=_n&&!qn.call({1:2},1);Fn.f=Wn?function(t){var e=_n(this,t);return!!e&&e.enumerable}:qn;var $n=v,Yn=$n({}.toString),zn=$n("".slice),Un=function(t){return zn(Yn(t),8,-1)},Hn=s,Vn=Un,Kn=Object,Xn=v("".split),Jn=Hn((function(){return!Kn("z").propertyIsEnumerable(0)}))?function(t){return"String"==Vn(t)?Xn(t,""):Kn(t)}:Kn,Qn=Jn,Zn=w,tr=function(t){return Qn(Zn(t))},er=l,nr=bt,rr=Fn,or=_e,ir=tr,ar=Ee,ur=E,cr=ft,sr=Object.getOwnPropertyDescriptor;Gn.f=er?sr:function(t,e){if(t=ir(t),e=ar(e),cr)try{return sr(t,e)}catch(t){}if(ur(t,e))return or(!nr(rr.f,t,e),t[e])};var lr=G,fr=it,pr=C,dr=$,hr=function(t,e,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:e;if(lr(n)&&pr(n,i,r),r.global)o?t[e]=n:dr(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:fr.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},yr={},vr=Math.ceil,gr=Math.floor,mr=Math.trunc||function(t){var e=+t;return(e>0?gr:vr)(e)},br=function(t){var e=+t;return e!=e||0===e?0:mr(e)},wr=br,Sr=Math.max,Or=Math.min,jr=function(t,e){var n=wr(t);return n<0?Sr(n+e,0):Or(n,e)},Tr=br,Pr=Math.min,Er=function(t){return t>0?Pr(Tr(t),9007199254740991):0},Rr=Er,Mr=function(t){return Rr(t.length)},xr=tr,kr=jr,Ar=Mr,Lr=function(t){return function(e,n,r){var o,i=xr(e),a=Ar(i),u=kr(r,a);if(t&&n!=n){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},Cr={includes:Lr(!0),indexOf:Lr(!1)},Ir=E,Nr=tr,Br=Cr.indexOf,Dr=Ve,Gr=v([].push),Fr=function(t,e){var n,r=Nr(t),o=0,i=[];for(n in r)!Ir(Dr,n)&&Ir(r,n)&&Gr(i,n);for(;e.length>o;)Ir(r,n=e[o++])&&(~Br(i,n)||Gr(i,n));return i},qr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_r=Fr,Wr=qr.concat("length","prototype");yr.f=Object.getOwnPropertyNames||function(t){return _r(t,Wr)};var $r={};$r.f=Object.getOwnPropertySymbols;var Yr=jt,zr=yr,Ur=$r,Hr=vt,Vr=v([].concat),Kr=Yr("Reflect","ownKeys")||function(t){var e=zr.f(Hr(t)),n=Ur.f;return n?Vr(e,n(t)):e},Xr=E,Jr=Kr,Qr=Gn,Zr=it,to=s,eo=G,no=/#|\.prototype\./,ro=function(t,e){var n=io[oo(t)];return n==uo||n!=ao&&(eo(e)?to(e):!!e)},oo=ro.normalize=function(t){return String(t).replace(no,".").toLowerCase()},io=ro.data={},ao=ro.NATIVE="N",uo=ro.POLYFILL="P",co=ro,so=q,lo=Gn.f,fo=Ye,po=hr,ho=$,yo=function(t,e,n){for(var r=Jr(e),o=Zr.f,i=Qr.f,a=0;a<r.length;a++){var u=r[a];Xr(t,u)||n&&Xr(n,u)||o(t,u,i(e,u))}},vo=co,go=function(t,e){var n,r,o,i,a,u=t.target,c=t.global,s=t.stat;if(n=c?so:s?so[u]||ho(u,{}):(so[u]||{}).prototype)for(r in e){if(i=e[r],o=t.dontCallGetSet?(a=lo(n,r))&&a.value:n[r],!vo(c?r:u+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;yo(i,o)}(t.sham||o&&o.sham)&&fo(i,"sham",!0),po(n,r,i,t)}},mo=Fr,bo=qr,wo=Object.keys||function(t){return mo(t,bo)},So=l,Oo=v,jo=bt,To=s,Po=wo,Eo=$r,Ro=Fn,Mo=j,xo=Jn,ko=Object.assign,Ao=Object.defineProperty,Lo=Oo([].concat),Co=!ko||To((function(){if(So&&1!==ko({b:1},ko(Ao({},"a",{enumerable:!0,get:function(){Ao(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=ko({},t)[n]||Po(ko({},e)).join("")!=r}))?function(t,e){for(var n=Mo(t),r=arguments.length,o=1,i=Eo.f,a=Ro.f;r>o;)for(var u,c=xo(arguments[o++]),s=i?Lo(Po(c),i(c)):Po(c),l=s.length,f=0;l>f;)u=s[f++],So&&!jo(a,c,u)||(n[u]=c[u]);return n}:ko,Io=Co;go({target:"Object",stat:!0,arity:2,forced:Object.assign!==Io},{assign:Io});var No={};No[ve("toStringTag")]="z";var Bo="[object z]"===String(No),Do=Bo,Go=G,Fo=Un,qo=ve("toStringTag"),_o=Object,Wo="Arguments"==Fo(function(){return arguments}()),$o=Do?Fo:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=_o(t),qo))?n:Wo?Fo(e):"Object"==(r=Fo(e))&&Go(e.callee)?"Arguments":r},Yo=$o,zo=Bo?{}.toString:function(){return"[object "+Yo(this)+"]"};Bo||hr(Object.prototype,"toString",zo,{unsafe:!0});var Uo="undefined"!=typeof process&&"process"==Un(process),Ho=v,Vo=Ht,Ko=G,Xo=String,Jo=TypeError,Qo=function(t,e,n){try{return Ho(Vo(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}},Zo=vt,ti=function(t){if("object"==typeof t||Ko(t))return t;throw Jo("Can't set "+Xo(t)+" as a prototype")},ei=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Qo(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Zo(n),ti(r),e?t(n,r):n.__proto__=r,n}}():void 0),ni=it.f,ri=E,oi=ve("toStringTag"),ii=function(t,e,n){t&&!n&&(t=t.prototype),t&&!ri(t,oi)&&ni(t,oi,{configurable:!0,value:e})},ai=jt,ui=xn,ci=l,si=ve("species"),li=Tt,fi=TypeError,pi=function(t,e){if(li(e,t))return t;throw fi("Incorrect invocation")},di=v,hi=s,yi=G,vi=$o,gi=Q,mi=function(){},bi=[],wi=jt("Reflect","construct"),Si=/^\s*(?:class|function)\b/,Oi=di(Si.exec),ji=!Si.exec(mi),Ti=function(t){if(!yi(t))return!1;try{return wi(mi,bi,t),!0}catch(t){return!1}},Pi=function(t){if(!yi(t))return!1;switch(vi(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ji||!!Oi(Si,gi(t))}catch(t){return!0}};Pi.sham=!0;var Ei,Ri,Mi,xi,ki=!wi||hi((function(){var t;return Ti(Ti.call)||!Ti(Object)||!Ti((function(){t=!0}))||t}))?Pi:Ti,Ai=ki,Li=$t,Ci=TypeError,Ii=vt,Ni=function(t){if(Ai(t))return t;throw Ci(Li(t)+" is not a constructor")},Bi=g,Di=ve("species"),Gi=f,Fi=Function.prototype,qi=Fi.apply,_i=Fi.call,Wi="object"==typeof Reflect&&Reflect.apply||(Gi?_i.bind(qi):function(){return _i.apply(qi,arguments)}),$i=Un,Yi=v,zi=function(t){if("Function"===$i(t))return Yi(t)},Ui=Ht,Hi=f,Vi=zi(zi.bind),Ki=function(t,e){return Ui(t),void 0===e?t:Hi?Vi(t,e):function(){return t.apply(e,arguments)}},Xi=jt("document","documentElement"),Ji=v([].slice),Qi=TypeError,Zi=/(?:ipad|iphone|ipod).*applewebkit/i.test(Pt),ta=q,ea=Wi,na=Ki,ra=G,oa=E,ia=s,aa=Xi,ua=Ji,ca=st,sa=function(t,e){if(t<e)throw Qi("Not enough arguments");return t},la=Zi,fa=Uo,pa=ta.setImmediate,da=ta.clearImmediate,ha=ta.process,ya=ta.Dispatch,va=ta.Function,ga=ta.MessageChannel,ma=ta.String,ba=0,wa={},Sa="onreadystatechange";ia((function(){Ei=ta.location}));var Oa=function(t){if(oa(wa,t)){var e=wa[t];delete wa[t],e()}},ja=function(t){return function(){Oa(t)}},Ta=function(t){Oa(t.data)},Pa=function(t){ta.postMessage(ma(t),Ei.protocol+"//"+Ei.host)};pa&&da||(pa=function(t){sa(arguments.length,1);var e=ra(t)?t:va(t),n=ua(arguments,1);return wa[++ba]=function(){ea(e,void 0,n)},Ri(ba),ba},da=function(t){delete wa[t]},fa?Ri=function(t){ha.nextTick(ja(t))}:ya&&ya.now?Ri=function(t){ya.now(ja(t))}:ga&&!la?(xi=(Mi=new ga).port2,Mi.port1.onmessage=Ta,Ri=na(xi.postMessage,xi)):ta.addEventListener&&ra(ta.postMessage)&&!ta.importScripts&&Ei&&"file:"!==Ei.protocol&&!ia(Pa)?(Ri=Pa,ta.addEventListener("message",Ta,!1)):Ri=Sa in ca("script")?function(t){aa.appendChild(ca("script"))[Sa]=function(){aa.removeChild(this),Oa(t)}}:function(t){setTimeout(ja(t),0)});var Ea={set:pa,clear:da},Ra=function(){this.head=null,this.tail=null};Ra.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var Ma,xa,ka,Aa,La,Ca=Ra,Ia=/ipad|iphone|ipod/i.test(Pt)&&"undefined"!=typeof Pebble,Na=/web0s(?!.*chrome)/i.test(Pt),Ba=q,Da=Ki,Ga=Gn.f,Fa=Ea.set,qa=Ca,_a=Zi,Wa=Ia,$a=Na,Ya=Uo,za=Ba.MutationObserver||Ba.WebKitMutationObserver,Ua=Ba.document,Ha=Ba.process,Va=Ba.Promise,Ka=Ga(Ba,"queueMicrotask"),Xa=Ka&&Ka.value;if(!Xa){var Ja=new qa,Qa=function(){var t,e;for(Ya&&(t=Ha.domain)&&t.exit();e=Ja.get();)try{e()}catch(t){throw Ja.head&&Ma(),t}t&&t.enter()};_a||Ya||$a||!za||!Ua?!Wa&&Va&&Va.resolve?((Aa=Va.resolve(void 0)).constructor=Va,La=Da(Aa.then,Aa),Ma=function(){La(Qa)}):Ya?Ma=function(){Ha.nextTick(Qa)}:(Fa=Da(Fa,Ba),Ma=function(){Fa(Qa)}):(xa=!0,ka=Ua.createTextNode(""),new za(Qa).observe(ka,{characterData:!0}),Ma=function(){ka.data=xa=!xa}),Xa=function(t){Ja.head||Ma(),Ja.add(t)}}var Za=Xa,tu=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},eu=q.Promise,nu="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,ru=!nu&&!Uo&&"object"==typeof window&&"object"==typeof document,ou=q,iu=eu,au=G,uu=co,cu=Q,su=ve,lu=ru,fu=nu,pu=Lt;iu&&iu.prototype;var du=su("species"),hu=!1,yu=au(ou.PromiseRejectionEvent),vu=uu("Promise",(function(){var t=cu(iu),e=t!==String(iu);if(!e&&66===pu)return!0;if(!pu||pu<51||!/native code/.test(t)){var n=new iu((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[du]=r,!(hu=n.then((function(){}))instanceof r))return!0}return!e&&(lu||fu)&&!yu})),gu={CONSTRUCTOR:vu,REJECTION_EVENT:yu,SUBCLASSING:hu},mu={},bu=Ht,wu=TypeError,Su=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw wu("Bad Promise constructor");e=t,n=r})),this.resolve=bu(e),this.reject=bu(n)};mu.f=function(t){return new Su(t)};var Ou,ju,Tu,Pu=go,Eu=Uo,Ru=q,Mu=bt,xu=hr,ku=ei,Au=ii,Lu=function(t){var e=ai(t);ci&&e&&!e[si]&&ui(e,si,{configurable:!0,get:function(){return this}})},Cu=Ht,Iu=G,Nu=ot,Bu=pi,Du=function(t,e){var n,r=Ii(t).constructor;return void 0===r||Bi(n=Ii(r)[Di])?e:Ni(n)},Gu=Ea.set,Fu=Za,qu=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}},_u=tu,Wu=Ca,$u=sn,Yu=eu,zu=mu,Uu="Promise",Hu=gu.CONSTRUCTOR,Vu=gu.REJECTION_EVENT,Ku=gu.SUBCLASSING,Xu=$u.getterFor(Uu),Ju=$u.set,Qu=Yu&&Yu.prototype,Zu=Yu,tc=Qu,ec=Ru.TypeError,nc=Ru.document,rc=Ru.process,oc=zu.f,ic=oc,ac=!!(nc&&nc.createEvent&&Ru.dispatchEvent),uc="unhandledrejection",cc=function(t){var e;return!(!Nu(t)||!Iu(e=t.then))&&e},sc=function(t,e){var n,r,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,c=t.resolve,s=t.reject,l=t.domain;try{u?(a||(2===e.rejection&&hc(e),e.rejection=1),!0===u?n=i:(l&&l.enter(),n=u(i),l&&(l.exit(),o=!0)),n===t.promise?s(ec("Promise-chain cycle")):(r=cc(n))?Mu(r,n,c,s):c(n)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},lc=function(t,e){t.notified||(t.notified=!0,Fu((function(){for(var n,r=t.reactions;n=r.get();)sc(n,t);t.notified=!1,e&&!t.rejection&&pc(t)})))},fc=function(t,e,n){var r,o;ac?((r=nc.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Ru.dispatchEvent(r)):r={promise:e,reason:n},!Vu&&(o=Ru["on"+t])?o(r):t===uc&&qu("Unhandled promise rejection",n)},pc=function(t){Mu(Gu,Ru,(function(){var e,n=t.facade,r=t.value;if(dc(t)&&(e=_u((function(){Eu?rc.emit("unhandledRejection",r,n):fc(uc,n,r)})),t.rejection=Eu||dc(t)?2:1,e.error))throw e.value}))},dc=function(t){return 1!==t.rejection&&!t.parent},hc=function(t){Mu(Gu,Ru,(function(){var e=t.facade;Eu?rc.emit("rejectionHandled",e):fc("rejectionhandled",e,t.value)}))},yc=function(t,e,n){return function(r){t(e,r,n)}},vc=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,lc(t,!0))},gc=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw ec("Promise can't be resolved itself");var r=cc(e);r?Fu((function(){var n={done:!1};try{Mu(r,e,yc(gc,n,t),yc(vc,n,t))}catch(e){vc(n,e,t)}})):(t.value=e,t.state=1,lc(t,!1))}catch(e){vc({done:!1},e,t)}}};if(Hu&&(tc=(Zu=function(t){Bu(this,tc),Cu(t),Mu(Ou,this);var e=Xu(this);try{t(yc(gc,e),yc(vc,e))}catch(t){vc(e,t)}}).prototype,(Ou=function(t){Ju(this,{type:Uu,done:!1,notified:!1,parent:!1,reactions:new Wu,rejection:!1,state:0,value:void 0})}).prototype=xu(tc,"then",(function(t,e){var n=Xu(this),r=oc(Du(this,Zu));return n.parent=!0,r.ok=!Iu(t)||t,r.fail=Iu(e)&&e,r.domain=Eu?rc.domain:void 0,0==n.state?n.reactions.add(r):Fu((function(){sc(r,n)})),r.promise})),ju=function(){var t=new Ou,e=Xu(t);this.promise=t,this.resolve=yc(gc,e),this.reject=yc(vc,e)},zu.f=oc=function(t){return t===Zu||undefined===t?new ju(t):ic(t)},Iu(Yu)&&Qu!==Object.prototype)){Tu=Qu.then,Ku||xu(Qu,"then",(function(t,e){var n=this;return new Zu((function(t,e){Mu(Tu,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete Qu.constructor}catch(t){}ku&&ku(Qu,tc)}Pu({global:!0,constructor:!0,wrap:!0,forced:Hu},{Promise:Zu}),Au(Zu,Uu,!1),Lu(Uu);var mc={},bc=mc,wc=ve("iterator"),Sc=Array.prototype,Oc=$o,jc=Xt,Tc=g,Pc=mc,Ec=ve("iterator"),Rc=function(t){if(!Tc(t))return jc(t,Ec)||jc(t,"@@iterator")||Pc[Oc(t)]},Mc=bt,xc=Ht,kc=vt,Ac=$t,Lc=Rc,Cc=TypeError,Ic=bt,Nc=vt,Bc=Xt,Dc=Ki,Gc=bt,Fc=vt,qc=$t,_c=function(t){return void 0!==t&&(bc.Array===t||Sc[wc]===t)},Wc=Mr,$c=Tt,Yc=function(t,e){var n=arguments.length<2?Lc(t):e;if(xc(n))return kc(Mc(n,t));throw Cc(Ac(t)+" is not iterable")},zc=Rc,Uc=function(t,e,n){var r,o;Nc(t);try{if(!(r=Bc(t,"return"))){if("throw"===e)throw n;return n}r=Ic(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Nc(r),n},Hc=TypeError,Vc=function(t,e){this.stopped=t,this.result=e},Kc=Vc.prototype,Xc=function(t,e,n){var r,o,i,a,u,c,s,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),y=Dc(e,l),v=function(t){return r&&Uc(r,"normal",t),new Vc(!0,t)},g=function(t){return f?(Fc(t),h?y(t[0],t[1],v):y(t[0],t[1])):h?y(t,v):y(t)};if(p)r=t.iterator;else if(d)r=t;else{if(!(o=zc(t)))throw Hc(qc(t)+" is not iterable");if(_c(o)){for(i=0,a=Wc(t);a>i;i++)if((u=g(t[i]))&&$c(Kc,u))return u;return new Vc(!1)}r=Yc(t,o)}for(c=p?t.next:r.next;!(s=Gc(c,r)).done;){try{u=g(s.value)}catch(t){Uc(r,"throw",t)}if("object"==typeof u&&u&&$c(Kc,u))return u}return new Vc(!1)},Jc=ve("iterator"),Qc=!1;try{var Zc=0,ts={next:function(){return{done:!!Zc++}},return:function(){Qc=!0}};ts[Jc]=function(){return this},Array.from(ts,(function(){throw 2}))}catch(t){}var es=function(t,e){if(!e&&!Qc)return!1;var n=!1;try{var r={};r[Jc]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},ns=eu,rs=gu.CONSTRUCTOR||!es((function(t){ns.all(t).then(void 0,(function(){}))})),os=bt,is=Ht,as=mu,us=tu,cs=Xc;go({target:"Promise",stat:!0,forced:rs},{all:function(t){var e=this,n=as.f(e),r=n.resolve,o=n.reject,i=us((function(){var n=is(e.resolve),i=[],a=0,u=1;cs(t,(function(t){var c=a++,s=!1;u++,os(n,e,t).then((function(t){s||(s=!0,i[c]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise}});var ss=go,ls=gu.CONSTRUCTOR,fs=eu,ps=jt,ds=G,hs=hr,ys=fs&&fs.prototype;if(ss({target:"Promise",proto:!0,forced:ls,real:!0},{catch:function(t){return this.then(void 0,t)}}),ds(fs)){var vs=ps("Promise").prototype.catch;ys.catch!==vs&&hs(ys,"catch",vs,{unsafe:!0})}var gs=bt,ms=Ht,bs=mu,ws=tu,Ss=Xc;go({target:"Promise",stat:!0,forced:rs},{race:function(t){var e=this,n=bs.f(e),r=n.reject,o=ws((function(){var o=ms(e.resolve);Ss(t,(function(t){gs(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var Os=bt,js=mu;go({target:"Promise",stat:!0,forced:gu.CONSTRUCTOR},{reject:function(t){var e=js.f(this);return Os(e.reject,void 0,t),e.promise}});var Ts=vt,Ps=ot,Es=mu,Rs=go,Ms=gu.CONSTRUCTOR,xs=function(t,e){if(Ts(t),Ps(e)&&e.constructor===t)return e;var n=Es.f(t);return(0,n.resolve)(e),n.promise};jt("Promise"),Rs({target:"Promise",stat:!0,forced:Ms},{resolve:function(t){return xs(this,t)}});var ks={},As=l,Ls=pt,Cs=it,Is=vt,Ns=tr,Bs=wo;ks.f=As&&!Ls?Object.defineProperties:function(t,e){Is(t);for(var n,r=Ns(e),o=Bs(e),i=o.length,a=0;i>a;)Cs.f(t,n=o[a++],r[n]);return t};var Ds,Gs=vt,Fs=ks,qs=qr,_s=Ve,Ws=Xi,$s=st,Ys="prototype",zs="script",Us=He("IE_PROTO"),Hs=function(){},Vs=function(t){return"<"+zs+">"+t+"</"+zs+">"},Ks=function(t){t.write(Vs("")),t.close();var e=t.parentWindow.Object;return t=null,e},Xs=function(){try{Ds=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;Xs="undefined"!=typeof document?document.domain&&Ds?Ks(Ds):(e=$s("iframe"),n="java"+zs+":",e.style.display="none",Ws.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(Vs("document.F=Object")),t.close(),t.F):Ks(Ds);for(var r=qs.length;r--;)delete Xs[Ys][qs[r]];return Xs()};_s[Us]=!0;var Js=Object.create||function(t,e){var n;return null!==t?(Hs[Ys]=Gs(t),n=new Hs,Hs[Ys]=null,n[Us]=t):n=Xs(),void 0===e?n:Fs.f(n,e)},Qs=ve,Zs=Js,tl=it.f,el=Qs("unscopables"),nl=Array.prototype;null==nl[el]&&tl(nl,el,{configurable:!0,value:Zs(null)});var rl,ol,il,al=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),ul=E,cl=G,sl=j,ll=al,fl=He("IE_PROTO"),pl=Object,dl=pl.prototype,hl=ll?pl.getPrototypeOf:function(t){var e=sl(t);if(ul(e,fl))return e[fl];var n=e.constructor;return cl(n)&&e instanceof n?n.prototype:e instanceof pl?dl:null},yl=s,vl=G,gl=ot,ml=hl,bl=hr,wl=ve("iterator"),Sl=!1;[].keys&&("next"in(il=[].keys())?(ol=ml(ml(il)))!==Object.prototype&&(rl=ol):Sl=!0);var Ol=!gl(rl)||yl((function(){var t={};return rl[wl].call(t)!==t}));Ol&&(rl={}),vl(rl[wl])||bl(rl,wl,(function(){return this}));var jl={IteratorPrototype:rl,BUGGY_SAFARI_ITERATORS:Sl},Tl=jl.IteratorPrototype,Pl=Js,El=_e,Rl=ii,Ml=mc,xl=function(){return this},kl=go,Al=bt,Ll=G,Cl=function(t,e,n,r){var o=e+" Iterator";return t.prototype=Pl(Tl,{next:El(+!r,n)}),Rl(t,o,!1),Ml[o]=xl,t},Il=hl,Nl=ei,Bl=ii,Dl=Ye,Gl=hr,Fl=mc,ql=L.PROPER,_l=L.CONFIGURABLE,Wl=jl.IteratorPrototype,$l=jl.BUGGY_SAFARI_ITERATORS,Yl=ve("iterator"),zl="keys",Ul="values",Hl="entries",Vl=function(){return this},Kl=function(t,e,n,r,o,i,a){Cl(n,e,r);var u,c,s,l=function(t){if(t===o&&y)return y;if(!$l&&t in d)return d[t];switch(t){case zl:case Ul:case Hl:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",p=!1,d=t.prototype,h=d[Yl]||d["@@iterator"]||o&&d[o],y=!$l&&h||l(o),v="Array"==e&&d.entries||h;if(v&&(u=Il(v.call(new t)))!==Object.prototype&&u.next&&(Il(u)!==Wl&&(Nl?Nl(u,Wl):Ll(u[Yl])||Gl(u,Yl,Vl)),Bl(u,f,!0)),ql&&o==Ul&&h&&h.name!==Ul&&(_l?Dl(d,"name",Ul):(p=!0,y=function(){return Al(h,this)})),o)if(c={values:l(Ul),keys:i?y:l(zl),entries:l(Hl)},a)for(s in c)($l||p||!(s in d))&&Gl(d,s,c[s]);else kl({target:e,proto:!0,forced:$l||p},c);return d[Yl]!==y&&Gl(d,Yl,y,{name:o}),Fl[e]=y,c},Xl=function(t,e){return{value:t,done:e}},Jl=tr,Ql=function(t){nl[el][t]=!0},Zl=mc,tf=sn,ef=it.f,nf=Kl,rf=Xl,of=l,af="Array Iterator",uf=tf.set,cf=tf.getterFor(af),sf=nf(Array,"Array",(function(t,e){uf(this,{type:af,target:Jl(t),index:0,kind:e})}),(function(){var t=cf(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,rf(void 0,!0)):rf("keys"==n?r:"values"==n?e[r]:[r,e[r]],!1)}),"values"),lf=Zl.Arguments=Zl.Array;if(Ql("keys"),Ql("values"),Ql("entries"),of&&"values"!==lf.name)try{ef(lf,"name",{value:"values"})}catch(t){}var ff=$o,pf=String,df=function(t){if("Symbol"===ff(t))throw TypeError("Cannot convert a Symbol value to a string");return pf(t)},hf=v,yf=br,vf=df,gf=w,mf=hf("".charAt),bf=hf("".charCodeAt),wf=hf("".slice),Sf=function(t){return function(e,n){var r,o,i=vf(gf(e)),a=yf(n),u=i.length;return a<0||a>=u?t?"":void 0:(r=bf(i,a))<55296||r>56319||a+1===u||(o=bf(i,a+1))<56320||o>57343?t?mf(i,a):r:t?wf(i,a,a+2):o-56320+(r-55296<<10)+65536}},Of={codeAt:Sf(!1),charAt:Sf(!0)}.charAt,jf=df,Tf=sn,Pf=Kl,Ef=Xl,Rf="String Iterator",Mf=Tf.set,xf=Tf.getterFor(Rf);Pf(String,"String",(function(t){Mf(this,{type:Rf,string:jf(t),index:0})}),(function(){var t,e=xf(this),n=e.string,r=e.index;return r>=n.length?Ef(void 0,!0):(t=Of(n,r),e.index+=t.length,Ef(t,!1))}));var kf={},Af={get exports(){return kf},set exports(t){kf=t}},Lf={},Cf=Ee,If=it,Nf=_e,Bf=jr,Df=Mr,Gf=function(t,e,n){var r=Cf(e);r in t?If.f(t,r,Nf(0,n)):t[r]=n},Ff=Array,qf=Math.max,_f=Un,Wf=tr,$f=yr.f,Yf=function(t,e,n){for(var r=Df(t),o=Bf(e,r),i=Bf(void 0===n?r:n,r),a=Ff(qf(i-o,0)),u=0;o<i;o++,u++)Gf(a,u,t[o]);return a.length=u,a},zf="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Lf.f=function(t){return zf&&"Window"==_f(t)?function(t){try{return $f(t)}catch(t){return Yf(zf)}}(t):$f(Wf(t))};var Uf=s((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Hf=s,Vf=ot,Kf=Un,Xf=Uf,Jf=Object.isExtensible,Qf=Hf((function(){Jf(1)}))||Xf?function(t){return!!Vf(t)&&((!Xf||"ArrayBuffer"!=Kf(t))&&(!Jf||Jf(t)))}:Jf,Zf=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),tp=go,ep=v,np=Ve,rp=ot,op=E,ip=it.f,ap=yr,up=Lf,cp=Qf,sp=Zf,lp=!1,fp=ue("meta"),pp=0,dp=function(t){ip(t,fp,{value:{objectID:"O"+pp++,weakData:{}}})},hp=Af.exports={enable:function(){hp.enable=function(){},lp=!0;var t=ap.f,e=ep([].splice),n={};n[fp]=1,t(n).length&&(ap.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===fp){e(r,o,1);break}return r},tp({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:up.f}))},fastKey:function(t,e){if(!rp(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!op(t,fp)){if(!cp(t))return"F";if(!e)return"E";dp(t)}return t[fp].objectID},getWeakData:function(t,e){if(!op(t,fp)){if(!cp(t))return!0;if(!e)return!1;dp(t)}return t[fp].weakData},onFreeze:function(t){return sp&&lp&&cp(t)&&!op(t,fp)&&dp(t),t}};np[fp]=!0;var yp=G,vp=ot,gp=ei,mp=go,bp=q,wp=v,Sp=co,Op=hr,jp=kf,Tp=Xc,Pp=pi,Ep=G,Rp=g,Mp=ot,xp=s,kp=es,Ap=ii,Lp=function(t,e,n){var r,o;return gp&&yp(r=e.constructor)&&r!==n&&vp(o=r.prototype)&&o!==n.prototype&&gp(t,o),t},Cp=hr,Ip=Un,Np=Array.isArray||function(t){return"Array"==Ip(t)},Bp=ki,Dp=ot,Gp=ve("species"),Fp=Array,qp=function(t){var e;return Np(t)&&(e=t.constructor,(Bp(e)&&(e===Fp||Np(e.prototype))||Dp(e)&&null===(e=e[Gp]))&&(e=void 0)),void 0===e?Fp:e},_p=Ki,Wp=Jn,$p=j,Yp=Mr,zp=function(t,e){return new(qp(t))(0===e?0:e)},Up=v([].push),Hp=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(c,s,l,f){for(var p,d,h=$p(c),y=Wp(h),v=_p(s,l),g=Yp(y),m=0,b=f||zp,w=e?b(c,g):n||a?b(c,0):void 0;g>m;m++)if((u||m in y)&&(d=v(p=y[m],m,h),t))if(e)w[m]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return m;case 2:Up(w,p)}else switch(t){case 4:return!1;case 7:Up(w,p)}return i?-1:r||o?o:w}},Vp={forEach:Hp(0),map:Hp(1),filter:Hp(2),some:Hp(3),every:Hp(4),find:Hp(5),findIndex:Hp(6),filterReject:Hp(7)},Kp=v,Xp=function(t,e,n){for(var r in e)Cp(t,r,e[r],n);return t},Jp=kf.getWeakData,Qp=pi,Zp=vt,td=g,ed=ot,nd=Xc,rd=E,od=sn.set,id=sn.getterFor,ad=Vp.find,ud=Vp.findIndex,cd=Kp([].splice),sd=0,ld=function(t){return t.frozen||(t.frozen=new fd)},fd=function(){this.entries=[]},pd=function(t,e){return ad(t.entries,(function(t){return t[0]===e}))};fd.prototype={get:function(t){var e=pd(this,t);if(e)return e[1]},has:function(t){return!!pd(this,t)},set:function(t,e){var n=pd(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=ud(this.entries,(function(e){return e[0]===t}));return~e&&cd(this.entries,e,1),!!~e}};var dd={getConstructor:function(t,e,n,r){var o=t((function(t,o){Qp(t,i),od(t,{type:e,id:sd++,frozen:void 0}),td(o)||nd(o,t[r],{that:t,AS_ENTRIES:n})})),i=o.prototype,a=id(e),u=function(t,e,n){var r=a(t),o=Jp(Zp(e),!0);return!0===o?ld(r).set(e,n):o[r.id]=n,t};return Xp(i,{delete:function(t){var e=a(this);if(!ed(t))return!1;var n=Jp(t);return!0===n?ld(e).delete(t):n&&rd(n,e.id)&&delete n[e.id]},has:function(t){var e=a(this);if(!ed(t))return!1;var n=Jp(t);return!0===n?ld(e).has(t):n&&rd(n,e.id)}}),Xp(i,n?{get:function(t){var e=a(this);if(ed(t)){var n=Jp(t);return!0===n?ld(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}};(function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=r?"set":"add",a=bp[t],u=a&&a.prototype,c=a,s={},l=function(t){var e=wp(u[t]);Op(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!Mp(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!Mp(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Mp(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(Sp(t,!Ep(a)||!(o||u.forEach&&!xp((function(){(new a).entries().next()})))))c=n.getConstructor(e,t,r,i),jp.enable();else if(Sp(t,!0)){var f=new c,p=f[i](o?{}:-0,1)!=f,d=xp((function(){f.has(1)})),h=kp((function(t){new a(t)})),y=!o&&xp((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));h||((c=e((function(t,e){Pp(t,u);var n=Lp(new a,t,c);return Rp(e)||Tp(e,n[i],{that:n,AS_ENTRIES:r}),n}))).prototype=u,u.constructor=c),(d||y)&&(l("delete"),l("has"),r&&l("get")),(y||p)&&l(i),o&&u.clear&&delete u.clear}s[t]=c,mp({global:!0,constructor:!0,forced:c!=a},s),Ap(c,t),o||n.setStrong(c,t,r)})("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),dd);var hd={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},yd=st("span").classList,vd=yd&&yd.constructor&&yd.constructor.prototype,gd=vd===Object.prototype?void 0:vd,md=q,bd=hd,wd=gd,Sd=sf,Od=Ye,jd=ve,Td=jd("iterator"),Pd=jd("toStringTag"),Ed=Sd.values,Rd=function(t,e){if(t){if(t[Td]!==Ed)try{Od(t,Td,Ed)}catch(e){t[Td]=Ed}if(t[Pd]||Od(t,Pd,e),bd[e])for(var n in Sd)if(t[n]!==Sd[n])try{Od(t,n,Sd[n])}catch(e){t[n]=Sd[n]}}};for(var Md in bd)Rd(md[Md]&&md[Md].prototype,Md);Rd(wd,"DOMTokenList");var xd=s,kd=function(t,e){var n=[][t];return!!n&&xd((function(){n.call(null,e||function(){return 1},1)}))},Ad=go,Ld=Jn,Cd=tr,Id=kd,Nd=v([].join);function Bd(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}Ad({target:"Array",proto:!0,forced:Ld!=Object||!Id("join",",")},{join:function(t){return Nd(Cd(this),void 0===t?",":t)}});var Dd=j,Gd=wo;go({target:"Object",stat:!0,forced:s((function(){Gd(1)}))},{keys:function(t){return Gd(Dd(t))}});var Fd,qd=ot,_d=Un,Wd=ve("match"),$d=function(t){var e;return qd(t)&&(void 0!==(e=t[Wd])?!!e:"RegExp"==_d(t))},Yd=TypeError,zd=ve("match"),Ud=go,Hd=zi,Vd=Gn.f,Kd=Er,Xd=df,Jd=function(t){if($d(t))throw Yd("The method doesn't accept regular expressions");return t},Qd=w,Zd=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[zd]=!1,"/./"[t](e)}catch(t){}}return!1},th=Hd("".startsWith),eh=Hd("".slice),nh=Math.min,rh=Zd("startsWith");Ud({target:"String",proto:!0,forced:!!(rh||(Fd=Vd(String.prototype,"startsWith"),!Fd||Fd.writable))&&!rh},{startsWith:function(t){var e=Xd(Qd(this));Jd(t);var n=Kd(nh(arguments.length>1?arguments[1]:void 0,e.length)),r=Xd(t);return th?th(e,r,n):eh(e,n,n+r.length)===r}});var oh=Vp.forEach,ih=kd("forEach")?[].forEach:function(t){return oh(this,t,arguments.length>1?arguments[1]:void 0)},ah=q,uh=hd,ch=gd,sh=ih,lh=Ye,fh=function(t){if(t&&t.forEach!==sh)try{lh(t,"forEach",sh)}catch(e){t.forEach=sh}};for(var ph in uh)uh[ph]&&fh(ah[ph]&&ah[ph].prototype);fh(ch);var dh=l,hh=v,yh=wo,vh=tr,gh=hh(Fn.f),mh=hh([].push),bh=function(t){return function(e){for(var n,r=vh(e),o=yh(r),i=o.length,a=0,u=[];i>a;)n=o[a++],dh&&!gh(r,n)||mh(u,t?[n,r[n]]:r[n]);return u}},wh={entries:bh(!0),values:bh(!1)}.entries;go({target:"Object",stat:!0},{entries:function(t){return wh(t)}});const Sh=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Oh(t,e){return Sh.test(t+="")?new Date(t):"function"==typeof e?e(t):e}const jh=new Map([["second",e.timeSecond],["minute",e.timeMinute],["hour",e.timeHour],["day",e.timeDay],["week",e.timeWeek],["month",e.timeMonth],["year",e.timeYear],["monday",e.timeMonday],["tuesday",e.timeTuesday],["wednesday",e.timeWednesday],["thursday",e.timeThursday],["friday",e.timeFriday],["saturday",e.timeSaturday],["sunday",e.timeSunday]]),Th=new Map([["second",e.utcSecond],["minute",e.utcMinute],["hour",e.utcHour],["day",e.utcDay],["week",e.utcWeek],["month",e.utcMonth],["year",e.utcYear],["monday",e.utcMonday],["tuesday",e.utcTuesday],["wednesday",e.utcWednesday],["thursday",e.utcThursday],["friday",e.utcFriday],["saturday",e.utcSaturday],["sunday",e.utcSunday]]);function Ph(t){const e=jh.get(`${t}`.toLowerCase());if(!e)throw new Error(`unknown interval: ${t}`);return e}function Eh(t){const e=Th.get(`${t}`.toLowerCase());if(!e)throw new Error(`unknown interval: ${t}`);return e}const Rh=Object.getPrototypeOf(Uint8Array),Mh=Object.prototype.toString,xh=t=>()=>t;function kh(t,e){return null==t?t:void 0===e?t instanceof Array||t instanceof Rh?t:Array.from(t):t instanceof e?t:e.from(t)}function Ah(t,e,n=Array){return t instanceof n?t.map(e):n.from(t,e)}function Lh(t,e=Array){return t instanceof e?t.slice():e.from(t)}function Ch(t){return function(t){return t?.toString===Mh}(t)&&(void 0!==t.type||void 0!==t.domain)}function Ih(t,n){if(null!=t){if("number"==typeof t){const n=t;return{floor:t=>n*Math.floor(t/n),offset:t=>t+n,range:(t,r)=>e.range(Math.ceil(t/n),r/n).map((t=>n*t))}}if("string"==typeof t)return("time"===n?Ph:Eh)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function Nh(t){for(const e of t){if(null==e)continue;const t=typeof e;return"string"===t||"boolean"===t}}function Bh(t){for(const e of t)if(null!=e)return e instanceof Date}function Dh(t){for(const e of t)if(null!=e)return"string"==typeof e&&isNaN(e)&&Oh(e)}function Gh(t){for(const e of t)if(null!=e){if("string"!=typeof e)return!1;if(e.trim())return!isNaN(e)}}function Fh(t,e){for(const n of t)if(null!=n)return e(n)}function qh(t,e){for(const n of t)if(null!=n&&!e(n))return!1;return!0}function _h(t){return"string"==typeof t&&("none"===(t=t.toLowerCase().trim())||"currentcolor"===t||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||null!==e.color(t))}function Wh(t){if(null==t)return;const n=t[0],r=t[t.length-1];return e.descending(n,r)}const $h=Symbol("position"),Yh=Symbol("color"),zh=Symbol("radius"),Uh=Symbol("length"),Hh=Symbol("opacity"),Vh=Symbol("symbol"),Kh=new Map([["x",$h],["y",$h],["fx",$h],["fy",$h],["r",zh],["color",Yh],["opacity",Hh],["symbol",Vh],["length",Uh]]);function Xh(t){return null!=t&&!Number.isNaN(t)}function Jh(t,n){return+Xh(n)-+Xh(t)||e.ascending(t,n)}function Qh(t){return isFinite(t)?t:NaN}function Zh(t){return t>0&&isFinite(t)?t:NaN}function ty(t){return t<0&&isFinite(t)?t:NaN}const ey=new Map([["accent",e.schemeAccent],["category10",e.schemeCategory10],["dark2",e.schemeDark2],["paired",e.schemePaired],["pastel1",e.schemePastel1],["pastel2",e.schemePastel2],["set1",e.schemeSet1],["set2",e.schemeSet2],["set3",e.schemeSet3],["tableau10",e.schemeTableau10],["brbg",ry(e.schemeBrBG,e.interpolateBrBG)],["prgn",ry(e.schemePRGn,e.interpolatePRGn)],["piyg",ry(e.schemePiYG,e.interpolatePiYG)],["puor",ry(e.schemePuOr,e.interpolatePuOr)],["rdbu",ry(e.schemeRdBu,e.interpolateRdBu)],["rdgy",ry(e.schemeRdGy,e.interpolateRdGy)],["rdylbu",ry(e.schemeRdYlBu,e.interpolateRdYlBu)],["rdylgn",ry(e.schemeRdYlGn,e.interpolateRdYlGn)],["spectral",ry(e.schemeSpectral,e.interpolateSpectral)],["burd",oy(e.schemeRdBu,e.interpolateRdBu)],["buylrd",oy(e.schemeRdYlBu,e.interpolateRdYlBu)],["blues",ny(e.schemeBlues,e.interpolateBlues)],["greens",ny(e.schemeGreens,e.interpolateGreens)],["greys",ny(e.schemeGreys,e.interpolateGreys)],["oranges",ny(e.schemeOranges,e.interpolateOranges)],["purples",ny(e.schemePurples,e.interpolatePurples)],["reds",ny(e.schemeReds,e.interpolateReds)],["turbo",iy(e.interpolateTurbo)],["viridis",iy(e.interpolateViridis)],["magma",iy(e.interpolateMagma)],["inferno",iy(e.interpolateInferno)],["plasma",iy(e.interpolatePlasma)],["cividis",iy(e.interpolateCividis)],["cubehelix",iy(e.interpolateCubehelixDefault)],["warm",iy(e.interpolateWarm)],["cool",iy(e.interpolateCool)],["bugn",ny(e.schemeBuGn,e.interpolateBuGn)],["bupu",ny(e.schemeBuPu,e.interpolateBuPu)],["gnbu",ny(e.schemeGnBu,e.interpolateGnBu)],["orrd",ny(e.schemeOrRd,e.interpolateOrRd)],["pubu",ny(e.schemePuBu,e.interpolatePuBu)],["pubugn",ny(e.schemePuBuGn,e.interpolatePuBuGn)],["purd",ny(e.schemePuRd,e.interpolatePuRd)],["rdpu",ny(e.schemeRdPu,e.interpolateRdPu)],["ylgn",ny(e.schemeYlGn,e.interpolateYlGn)],["ylgnbu",ny(e.schemeYlGnBu,e.interpolateYlGnBu)],["ylorbr",ny(e.schemeYlOrBr,e.interpolateYlOrBr)],["ylorrd",ny(e.schemeYlOrRd,e.interpolateYlOrRd)],["rainbow",ay(e.interpolateRainbow)],["sinebow",ay(e.interpolateSinebow)]]);function ny(t,n){return({length:r})=>1===r?[t[3][1]]:2===r?[t[3][1],t[3][2]]:(r=Math.max(3,Math.floor(r)))>9?e.quantize(n,r):t[r]}function ry(t,n){return({length:r})=>2===r?[t[3][0],t[3][2]]:(r=Math.max(3,Math.floor(r)))>11?e.quantize(n,r):t[r]}function oy(t,n){return({length:r})=>2===r?[t[3][2],t[3][0]]:(r=Math.max(3,Math.floor(r)))>11?e.quantize((t=>n(1-t)),r):t[r].slice().reverse()}function iy(t){return({length:n})=>e.quantize(t,Math.max(2,Math.floor(n)))}function ay(t){return({length:n})=>e.quantize(t,Math.floor(n)+1).slice(0,-1)}function uy(t){const e=`${t}`.toLowerCase();if(!ey.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return ey.get(e)}function cy(t,e){const n=uy(t),r="function"==typeof n?n({length:e}):n;return r.length!==e?r.slice(0,e):r}const sy=new Map([["brbg",e.interpolateBrBG],["prgn",e.interpolatePRGn],["piyg",e.interpolatePiYG],["puor",e.interpolatePuOr],["rdbu",e.interpolateRdBu],["rdgy",e.interpolateRdGy],["rdylbu",e.interpolateRdYlBu],["rdylgn",e.interpolateRdYlGn],["spectral",e.interpolateSpectral],["burd",t=>e.interpolateRdBu(1-t)],["buylrd",t=>e.interpolateRdYlBu(1-t)],["blues",e.interpolateBlues],["greens",e.interpolateGreens],["greys",e.interpolateGreys],["purples",e.interpolatePurples],["reds",e.interpolateReds],["oranges",e.interpolateOranges],["turbo",e.interpolateTurbo],["viridis",e.interpolateViridis],["magma",e.interpolateMagma],["inferno",e.interpolateInferno],["plasma",e.interpolatePlasma],["cividis",e.interpolateCividis],["cubehelix",e.interpolateCubehelixDefault],["warm",e.interpolateWarm],["cool",e.interpolateCool],["bugn",e.interpolateBuGn],["bupu",e.interpolateBuPu],["gnbu",e.interpolateGnBu],["orrd",e.interpolateOrRd],["pubugn",e.interpolatePuBuGn],["pubu",e.interpolatePuBu],["purd",e.interpolatePuRd],["rdpu",e.interpolateRdPu],["ylgnbu",e.interpolateYlGnBu],["ylgn",e.interpolateYlGn],["ylorbr",e.interpolateYlOrBr],["ylorrd",e.interpolateYlOrRd],["rainbow",e.interpolateRainbow],["sinebow",e.interpolateSinebow]]);function ly(t){const e=`${t}`.toLowerCase();if(!sy.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return sy.get(e)}const fy=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function py(t){return null!=t&&fy.has(`${t}`.toLowerCase())}const dy=t=>e=>t(1-e),hy=[0,1],yy=new Map([["number",e.interpolateNumber],["rgb",e.interpolateRgb],["hsl",e.interpolateHsl],["hcl",e.interpolateHcl],["lab",e.interpolateLab]]);function vy(t){const e=`${t}`.toLowerCase();if(!yy.has(e))throw new Error(`unknown interpolator: ${e}`);return yy.get(e)}function gy(t,n,r,{type:o,nice:i,clamp:a,zero:u,domain:c=Sy(t,r),unknown:s,round:l,scheme:f,interval:p,range:d=(Kh.get(t)===zh?jy(r,c):Kh.get(t)===Uh?Ty(r,c):Kh.get(t)===Hh?hy:void 0),interpolate:h=(Kh.get(t)===Yh?null==f&&void 0!==d?e.interpolateRgb:ly(void 0!==f?f:"cyclical"===o?"rainbow":"turbo"):l?e.interpolateRound:e.interpolateNumber),reverse:y}){if(p=Ih(p,o),"cyclical"!==o&&"sequential"!==o||(o="linear"),y=!!y,"function"!=typeof h&&(h=vy(h)),1===h.length?(y&&(h=dy(h),y=!1),void 0===d&&2===(d=Float64Array.from(c,((t,e)=>e/(c.length-1)))).length&&(d=hy),n.interpolate((d===hy?xh:Ry)(h))):n.interpolate(h),u){const[t,n]=e.extent(c);(t>0||n<0)&&(Wh(c=Lh(c))!==Math.sign(t)?c[c.length-1]=0:c[0]=0)}return y&&(c=e.reverse(c)),n.domain(c).unknown(s),i&&(n.nice(!0===i?void 0:i),c=n.domain()),void 0!==d&&n.range(d),a&&n.clamp(a),{type:o,domain:c,range:d,scale:n,interpolate:h,interval:p}}function my(t,n,{exponent:r=1,...o}){return gy(t,e.scalePow().exponent(r),n,{...o,type:"pow"})}function by(t,n,{domain:r=[0],unknown:o,scheme:i="rdylbu",interpolate:a,range:u=(void 0!==a?e.quantize(a,r.length+1):Kh.get(t)===Yh?cy(i,r.length+1):void 0),reverse:c}){const s=Wh(kh(r));if(!e.pairs(r).every((([t,n])=>function(t,n,r){const o=e.descending(t,n);return 0===o||o===r}(t,n,s))))throw new Error(`the ${t} scale has a non-monotonic domain`);return c&&(u=e.reverse(u)),{type:"threshold",scale:e.scaleThreshold(s<0?e.reverse(r):r,void 0===u?[]:u).unknown(o),domain:r,range:u}}function wy(t,n=Qh){return t.length?[e.min(t,(({value:t})=>void 0===t?t:e.min(t,n))),e.max(t,(({value:t})=>void 0===t?t:e.max(t,n)))]:[0,1]}function Sy(t,e){const n=Kh.get(t);return(n===zh||n===Hh||n===Uh?Oy:wy)(e)}function Oy(t){return[0,t.length?e.max(t,(({value:t})=>void 0===t?t:e.max(t,Qh))):1]}function jy(t,n){const r=t.find((({radius:t})=>void 0!==t));if(void 0!==r)return[0,r.radius];const o=e.quantile(t,.5,(({value:t})=>void 0===t?NaN:e.quantile(t,.25,Zh))),i=n.map((t=>3*Math.sqrt(t/o))),a=30/e.max(i);return a<1?i.map((t=>t*a)):i}function Ty(t,n){const r=e.median(t,(({value:t})=>void 0===t?NaN:e.median(t,Math.abs))),o=n.map((t=>12*t/r)),i=60/e.max(o);return i<1?o.map((t=>t*i)):o}function Py(t){for(const{value:e}of t)if(void 0!==e)for(let n of e){if(n=+n,n>0)return wy(t,Zh);if(n<0)return wy(t,ty)}return[1,10]}function Ey(t){const e=[];for(const{value:n}of t)if(void 0!==n)for(const t of n)e.push(t);return e}function Ry(t){return(e,n)=>r=>t(e+r*(n-e))}function My(t,n,r,o,{type:i,nice:a,clamp:u,domain:c=wy(o),unknown:s,pivot:l=0,scheme:f,range:p,symmetric:d=!0,interpolate:h=(Kh.get(t)===Yh?null==f&&void 0!==p?e.interpolateRgb:ly(void 0!==f?f:"rdbu"):e.interpolateNumber),reverse:y}){l=+l;let[v,g]=c;if(e.descending(v,g)<0&&([v,g]=[g,v],y=!y),v=Math.min(v,l),g=Math.max(g,l),"function"!=typeof h&&(h=vy(h)),void 0!==p&&(h=1===h.length?Ry(h)(...p):e.piecewise(h,p)),y&&(h=dy(h)),d){const t=r.apply(l),e=t-r.apply(v),n=r.apply(g)-t;e<n?v=r.invert(t-n):e>n&&(g=r.invert(t+e))}return n.domain([v,l,g]).unknown(s).interpolator(h),u&&n.clamp(u),a&&n.nice(a),{type:i,domain:[v,g],pivot:l,interpolate:h,scale:n}}function xy(t,n,{exponent:r=1,...o}){return My(t,e.scaleDivergingPow().exponent(r=+r),function(t){return.5===t?Cy:{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),t),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/t)}}(r),n,{...o,type:"diverging-pow"})}function ky(t,n,{constant:r=1,...o}){return My(t,e.scaleDivergingSymlog().constant(r=+r),function(t){return{apply:e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),invert:e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}}(r),n,o)}const Ay={apply:t=>t,invert:t=>t},Ly={apply:Math.log,invert:Math.exp},Cy={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function Iy(t,e,n,r){return gy(t,e,n,r)}const Ny=2/Math.sqrt(3),By={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*Ny,o=r/2;t.moveTo(0,r),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(0,-r),t.lineTo(-n,-o),t.lineTo(-n,o),t.closePath()}},Dy=new Map([["asterisk",e.symbolAsterisk],["circle",e.symbolCircle],["cross",e.symbolCross],["diamond",e.symbolDiamond],["diamond2",e.symbolDiamond2],["hexagon",By],["plus",e.symbolPlus],["square",e.symbolSquare],["square2",e.symbolSquare2],["star",e.symbolStar],["times",e.symbolTimes],["triangle",e.symbolTriangle],["triangle2",e.symbolTriangle2],["wye",e.symbolWye]]);function Gy(t){return t&&"function"==typeof t.draw}function Fy(t){return!!Gy(t)||"string"==typeof t&&Dy.has(t.toLowerCase())}function qy(t){if(null==t||Gy(t))return t;const e=Dy.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}const _y=Symbol("ordinal");function Wy(t,n,r,{type:o,interval:i,domain:a,range:u,reverse:c,hint:s}){return i=Ih(i,o),void 0===a&&(a=zy(r,i,t)),"categorical"!==o&&o!==_y||(o="ordinal"),c&&(a=e.reverse(a)),n.domain(a),void 0!==u&&("function"==typeof u&&(u=u(a)),n.range(u)),{type:o,domain:a,range:u,scale:n,hint:s,interval:i}}function $y(t,n,{type:r,interval:o,domain:i,range:a,scheme:u,unknown:c,...s}){let l;if(o=Ih(o,r),void 0===i&&(i=zy(n,o,t)),Kh.get(t)===Vh)l=function(t){return{fill:Uy(t,"fill"),stroke:Uy(t,"stroke")}}(n),a=void 0===a?function(t){return n=t.fill,null==n||function(t){return/^\s*none\s*$/i.test(t)}(n)?e.symbolsStroke:e.symbolsFill;var n}(l):Ah(a,qy);else if(Kh.get(t)===Yh&&(void 0!==a||"ordinal"!==r&&r!==_y||(a=function(t,e="greys"){const n=new Set,[r,o]=cy(e,2);for(const e of t)if(null!=e)if(!0===e)n.add(o);else{if(!1!==e)return;n.add(r)}return[...n]}(i,u),void 0!==a&&(u=void 0)),void 0===u&&void 0===a&&(u="ordinal"===r?"turbo":"tableau10"),void 0!==u))if(void 0!==a){const t=ly(u),n=a[0],r=a[1]-a[0];a=({length:o})=>e.quantize((e=>t(n+r*e)),o)}else a=uy(u);if(c===e.scaleImplicit)throw new Error("implicit unknown is not supported");return Wy(t,e.scaleOrdinal().unknown(c),n,{...s,type:r,domain:i,range:a,hint:l})}function Yy(t,e,n,r){let{round:o}=n;return void 0!==o&&t.round(o=!!o),(t=Wy(r,t,e,n)).round=o,t}function zy(t,n,r){const o=new e.InternSet;for(const{value:e,domain:n}of t){if(void 0!==n)return n();if(void 0!==e)for(const t of e)o.add(t)}if(void 0!==n){const[t,r]=e.extent(o).map(n.floor,n);return n.range(t,n.offset(r))}if(o.size>1e4&&Kh.get(r)===$h)throw new Error("implicit ordinal position domain has more than 10,000 values");return e.sort(o,Jh)}function Uy(t,e){let n;for(const{hint:r}of t){const t=r?.[e];if(void 0!==t)if(void 0===n)n=t;else if(n!==t)return}return n}function Hy(t){console.warn(t)}function Vy(t,n,r){return function(t,n=[],r={}){const o=function(t,e,{type:n,domain:r,range:o,scheme:i,pivot:a,projection:u}){if("fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==u||(n=Xy);for(const{type:t}of e)if(void 0!==t)if(void 0===n)n=t;else if(n!==t)throw new Error(`scale incompatible with channel: ${n} !== ${t}`);if(n===Xy)return;if(void 0!==n)return n;if(void 0===r&&!e.some((({value:t})=>void 0!==t)))return;const c=Kh.get(t);if(c===Yh&&void 0===o&&void 0===i&&Qy(r,e,_h))return"identity";if(c===Vh&&void 0===o&&Qy(r,e,Fy))return"identity";if(c===zh)return"sqrt";if(c===Hh||c===Uh)return"linear";if(c===Vh)return"ordinal";if((r||o||[]).length>2)return Jy(c);if(void 0!==r)return Nh(r)?Jy(c):Bh(r)?"utc":c!==Yh||null==a&&!py(i)?"linear":"diverging";const s=e.map((({value:t})=>t)).filter((t=>void 0!==t));return s.some(Nh)?Jy(c):s.some(Bh)?"utc":c!==Yh||null==a&&!py(i)?"linear":"diverging"}(t,n,r);if(void 0===r.type&&void 0===r.domain&&void 0===r.range&&null==r.interval&&"fx"!==t&&"fy"!==t&&function({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===_y}({type:o})){const e=n.map((({value:t})=>t)).filter((t=>void 0!==t));e.some(Bh)?Hy(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Ky(o)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Ky(o)}".`):e.some(Dh)?Hy(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Ky(o)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Ky(o)}".`):e.some(Gh)&&Hy(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Ky(o)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Ky(o)}".`)}switch(r.type=o,o){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":r=Zy(n,r,nv);break;case"identity":switch(Kh.get(t)){case $h:r=Zy(n,r,nv);break;case Vh:r=Zy(n,r,tv)}break;case"utc":case"time":r=Zy(n,r,ev)}switch(o){case"diverging":return function(t,n,r){return My(t,e.scaleDiverging(),Ay,n,r)}(t,n,r);case"diverging-sqrt":return function(t,e,n){return xy(t,e,{...n,exponent:.5})}(t,n,r);case"diverging-pow":return xy(t,n,r);case"diverging-log":return function(t,n,{base:r=10,pivot:o=1,domain:i=wy(n,o<0?ty:Zh),...a}){return My(t,e.scaleDivergingLog().base(r=+r),Ly,n,{domain:i,pivot:o,...a})}(t,n,r);case"diverging-symlog":return ky(t,n,r);case"categorical":case"ordinal":case _y:return $y(t,n,r);case"cyclical":case"sequential":case"linear":return function(t,n,r){return gy(t,e.scaleLinear(),n,r)}(t,n,r);case"sqrt":return function(t,e,n){return my(t,e,{...n,exponent:.5})}(t,n,r);case"threshold":return by(t,0,r);case"quantile":return function(t,n,{range:r,quantiles:o=(void 0===r?5:(r=[...r]).length),n:i=o,scheme:a="rdylbu",domain:u=Ey(n),interpolate:c,reverse:s}){return void 0===r&&(r=void 0!==c?e.quantize(c,i):Kh.get(t)===Yh?cy(a,i):void 0),u.length>0&&(u=e.scaleQuantile(u,void 0===r?{length:i}:r).quantiles()),by(t,0,{domain:u,range:r,reverse:s})}(t,n,r);case"quantize":return function(t,n,{range:r,n:o=(void 0===r?5:(r=[...r]).length),scheme:i="rdylbu",domain:a=Sy(t,n),unknown:u,interpolate:c,reverse:s}){const[l,f]=e.extent(a);let p;return void 0===r?(p=e.ticks(l,f,o),p[0]<=l&&p.splice(0,1),p[p.length-1]>=f&&p.pop(),o=p.length+1,r=void 0!==c?e.quantize(c,o):Kh.get(t)===Yh?cy(i,o):void 0):(p=e.quantize(e.interpolateNumber(l,f),o+1).slice(1,-1),l instanceof Date&&(p=p.map((t=>new Date(t))))),Wh(kh(a))<0&&p.reverse(),by(t,0,{domain:p,range:r,reverse:s,unknown:u})}(t,n,r);case"pow":return my(t,n,r);case"log":return function(t,n,{base:r=10,domain:o=Py(n),...i}){return gy(t,e.scaleLog().base(r),n,{...i,domain:o})}(t,n,r);case"symlog":return function(t,n,{constant:r=1,...o}){return gy(t,e.scaleSymlog().constant(r),n,o)}(t,n,r);case"utc":return function(t,n,r){return Iy(t,e.scaleUtc(),n,r)}(t,n,r);case"time":return function(t,n,r){return Iy(t,e.scaleTime(),n,r)}(t,n,r);case"point":return function(t,n,{align:r=.5,padding:o=.5,...i}){return Yy(e.scalePoint().align(r).padding(o),n,i,t)}(t,n,r);case"band":return function(t,n,{align:r=.5,padding:o=.1,paddingInner:i=o,paddingOuter:a=("fx"===t||"fy"===t?0:o),...u}){return Yy(e.scaleBand().align(r).paddingInner(i).paddingOuter(a),n,u,t)}(t,n,r);case"identity":return Kh.get(t)===$h?{type:"identity",scale:e.scaleIdentity()}:{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${o}`)}}(t,void 0===r?void 0:[{hint:r}],{...n})}function Ky(t){return"symbol"==typeof t?t.description:t}const Xy={toString:()=>"projection"};function Jy(t){switch(t){case $h:return"point";case Yh:return _y;default:return"ordinal"}}function Qy(t,e,n){return void 0!==t?Fh(t,n)&&qh(t,n):e.some((({value:t})=>void 0!==t&&Fh(t,n)))&&e.every((({value:t})=>void 0===t||qh(t,n)))}function Zy(t,{domain:e,...n},r){for(const e of t)void 0!==e.value&&(e.value=r(e.value));return{domain:void 0===e?e:r(e),...n}}function tv(t){return Ah(t,qy)}function ev(t){return Ah(t,ov)}function nv(t){return function(t){return t instanceof Rh}(t)?t:Ah(t,rv,Float64Array)}function rv(t){return null==t?NaN:+t}function ov(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?Oh(t):null==t||isNaN(t=+t)?void 0:new Date(t)}function iv({scale:t,type:e,domain:n,range:r,interpolate:o,interval:i,transform:a,percent:u,pivot:c}){if("identity"===e)return{type:"identity",apply:t=>t,invert:t=>t};const s=t.unknown?t.unknown():void 0;return{type:e,domain:Lh(n),...void 0!==r&&{range:Lh(r)},...void 0!==a&&{transform:a},...u&&{percent:u},...void 0!==s&&{unknown:s},...void 0!==i&&{interval:i},...void 0!==o&&{interpolate:o},...t.clamp&&{clamp:t.clamp()},...void 0!==c&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:e=>t(e),...t.invert&&{invert:e=>t.invert(e)}}}var av,uv;!function(t){t[t.SCROLL_NONE=0]="SCROLL_NONE",t[t.SCROLL_BACKWARD=1]="SCROLL_BACKWARD",t[t.SCROLL_FORWARD=2]="SCROLL_FORWARD"}(av||(av={})),function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT"}(uv||(uv={}));var cv,sv,lv,fv="red";function pv(t){try{var e=Object.keys(t)[0];return function(t={}){let e;for(const n in t)if(Kh.has(n)&&Ch(t[n])){if(void 0!==e)throw new Error("ambiguous scale definition; multiple scales found");e=iv(Vy(n,t[n]))}if(void 0===e)throw new Error("invalid scale definition; no scale found");return e}((n={},r=e,o=Object.assign(Object.assign({},t[e]),{clamp:!0}),(r=u(r))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n))}catch(t){return null}var n,r,o}function dv(t,e,n,o){Object.entries(function(t,e){var n={};return e.hasOwnProperty("opacity")?(n.fill=function(){return e.opacity.baseColor||fv},n["fill-opacity"]=function(e){return null==t?void 0:t.apply(e)}):n.fill=function(e){return"string"==typeof e&&(null==e?void 0:e.startsWith("#"))?e:null==t?void 0:t.apply(e)},n}(e,n)).forEach((function(e){var n=r(e,2),i=n[0],a=n[1];return t.style(i,(function(t){return a(o?t[o]:t)}))}))}var hv=".graph-legend",yv={enabled:!0,itemSelector:null,width:10,height:10,gutter:2,radius:0,includeBlank:!1},vv=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cv.add(this),this.name="LegendLite",this.calendar=t,this.root=null,this.shown=!1,this.options=yv}var r,o,i;return r=e,o=[{key:"setup",value:function(t){this.options=Object.assign(Object.assign({},this.options),t)}},{key:"paint",value:function(){var e=this.options,n=e.enabled,r=e.itemSelector;if(!n||r&&t.select(r).empty())return this.destroy();this.shown=!0,this.root=t.select(r||this.calendar.options.options.itemSelector),this.root.select(hv).empty()?this.root=this.root.append("div").attr("class",hv.slice(1)):this.root=this.root.select(hv);var o=Bd(this,cv,"m",sv).call(this);return this.root.selectAll("*").remove(),this.root.append((function(){return o.node()})),Promise.resolve()}},{key:"destroy",value:function(){return null!==this.root&&(this.root.remove(),this.root=null),Promise.resolve()}}],o&&n(r.prototype,o),i&&n(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();return cv=new WeakSet,sv=function(){var e=this,n=t.create("svg"),r=pv(this.calendar.options.options.scale),i=this.options,a=i.width,u=i.height,c=i.gutter,s=i.includeBlank,l=o(r.range);return s&&l.unshift(null),n.attr("width",l.length*a+(l.length-1)*c).attr("height",u),n.selectAll("rect").data(l).join((function(t){return t.append("rect").call((function(t){return Bd(e,cv,"m",lv).call(e,t,r)}))}),(function(t){return t.selectAll("rect").call((function(t){return Bd(e,cv,"m",lv).call(e,t,r)}))})),n},lv=function(t,e){var n=this,r=this.options,o=r.width,i=r.height,a=r.radius,u=r.gutter;return t.attr("width",o).attr("height",i).attr("class","graph-rect").attr("rx",a).attr("ry",a).attr("x",(function(t,e){return e*(o+u)})).attr("y",0).call((function(t){dv(t,e,n.calendar.options.options.scale)}))},vv}));//# sourceMappingURL=LegendLite.min.js.map
